<nav class="navbar">
    <h1>
        Self-Care Sidekick
    </h1>
</nav>

{{!-- Signup Container --}}
<div class="container signup-box">
    <div class="row">
        <div class="col-md-6 col-md-offset 3">
            <h2>Your Info</h2>
            <form class="signup">
                <div class="form-group">
                    <input type="email" class="form-control" id="email-input" placeholder="Email">
                </div>
                <div class="form-group">
                    <input type="password" class="form-control" id="password-input" placeholder="Password">
                </div>

                {{!-- Choose Character/Avatar --}}
                <p>Choose a Sidekick:</p>
                <div class="row">
                    <div class="col-md-6 choose-cat form-check">
                        <label>
                        <input class = "form-check-input" type = "radio" name = "Choice" id = "catChoiceId" value = "option1">
                        {{!-- <label class="form-check-label" for = "catChoiceId"> --}}
                        <img src="/assets/Cat-Neutral.png" alt="Cat" width="250px" id="cat"
                            data-catdog="{{sidekickImage}}">
                        </label>
                    </div>

                    <div class="col-md-6 choose-dog form-check">
                        <label>
                       <input class = "form-check-input" type = "radio" name = "Choice" id = "dogChoiceId" value = "option2">
                        {{!-- <label class="form-check-label" for = "dogChoiceId"> --}}
                           <img src="/assets/Dog-Neutral.png" alt="Dog" width="250px" id="dog"
                            data-catdog="{{sidekickImage}}">
                        </label>
                    </div>
                </div>
                <input type="text" class="form-control" id="name-input" placeholder="SidekickName">
                <br>
                <button type="submit" class="btn btn-default">Sign Up</button>
            </form>

            <br>
            <p>Already a friend? Login <a href="/views/home.handlebars">here</a>.</p>
        </div>
    </div>
</div>

<footer class="footer">
    Contributors and Credits: <a href="#">Links here</a> || <a href="#">Links here</a> || <a href="#">Links here</a> ||
    <a href="#">Links here</a> || <a href="#">Links here</a>
</footer>


{{!-- data attributes, independent on-click event, set global variable = to data attribute $(this).data-attribute
if dog clicked, set value and add after submit --}}
{{!-- sidekickImage = url imgsrc --}}
<script>
    $(document).ready(function () {
        const signupForm = $(".signup");
        const emailInput = $("input#email-input");
        const passwordInput = $("input#password-input");
        const sidekick = $("input#sidekickname-input");

        const cat = $("#cat");
        const dog = $("#dog");

        var isCat;
        var sidekickImage = "";

        console.log("party");

        $("catBtn").on("click",event => {
            isCat = true;
            console.log("cat")
        });

        $("dogBtn").on("click",event => {
            isCat = false;
            console.log("dog");
        });


        signupForm.on("submit", event => {
            event.preventDefault();
            if (isCat === true) {
                sidekickImage = "/assets/Cat-Neutral.png"
                console.log(isCat)
            }
            else if (isCat === false) {
                sidekickImage = "/assets/Dog-Neutral.png"
                console.log(isCat)
            }

            const sidekickData = {
                name: sidekick.val().trim(),
                image: sidekickImage
            }   

            const userData = {
                email: emailInput.val().trim(),
                password: passwordInput.val().trim()
            };

            if (!userData.email || !userData.password) {
                alert("Please enter a valid username and password.")
                return;
            }

            createSidekick(sidekickData.name, sidekickData.image);
            createUser(userData.email, userData.password);
            emailInput.val("");
            passwordInput.val("");
            sidekick.val("");
        });


        
        function createUser(email, password) {
        $.post("/api/signup", {
            email: email,
            password: password
        }).then(
                function () {
                    console.log("new user added: " + userData);
                })
        }

        function createSidekick(name, image) {
            $.post("/api/sidekick", {
                sidekickName: name,
                sidekickImage: image
            }).then(
                    function () {
                        console.log("added sidekick: " + sidekickData);
                    }
            )
        }
    });
</script>